---
import AboutLayout from '../layouts/AboutLayout.astro';
import AboutPhotoBubble from '../components/AboutPhotoBubble.astro';

// Server-side fallback for SEO / no-JS users
const start = new Date('2023-01-01T00:00:00');
const now = new Date();
let years = now.getFullYear() - start.getFullYear();
const monthDiff = now.getMonth() - start.getMonth();
const dayDiff = now.getDate() - start.getDate();
if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) years--;
if (years < 0) years = 0;
const yearsLabel = `${years} year${years === 1 ? '' : 's'}`;
---

<AboutLayout
  title="About Me"
  description="Civil engineering PhD, systems builder, and data-driven life logger."
  pubDate="2025-10-14"
  wide
  showViews={false}
>
  <!-- ðŸ—¨ï¸ Little JosÃ© speech-bubble hero -->
  <AboutPhotoBubble
    slot="hero"
    src="/images/about-lifeloggerz.gif"
    alt="Family gathered while young JosÃ© draws at the table."
    bubbleText="A ver si se me quitan..."
    hotspotBottom="8%"
    hotspotLeft="27%"
    hotspotWidth="24%"
    hotspotHeight="32%"
    bubbleBottom="40%"
    bubbleLeft="45%"
  />

  <div class="about">
    <!-- ðŸ” your existing text content unchanged -->
    <p>
      Welcome! Iâ€™m <strong>JosÃ©</strong> â€” the kid sitting down with pen and paper in the photo above. I'm an
      engineering grad student and the guy behind <strong>LifeLoggerz</strong>. Iâ€™m obsessed with optimizing my time and
      turning variable actions into clean, repeatable systems. When I'm not working or pursuing my other hobbies, I
      build <strong>Google Sheets dashboards, Python tools, and routines that make research (and life) more efficient.</strong>
    </p>

    <!-- ...all the rest of your h2/p/ul/etc exactly as before... -->

    <h2>ðŸŒ± Why This Blog Exists</h2>
    <p>
      For the past <span id="years-since" data-start="2023-01-01">{yearsLabel}</span>, I've given impromptu demos of my
      systems to people. <strong>Publishing them here allows you to interact with these systems directly.</strong> If
      youâ€™re curious about tracking your habits, streamlining research, or building your own life-OS, youâ€™re in the
      right place.
    </p>

    <h2>ðŸ“¬ Get in Touch</h2>
    <p class="centered-email">
      Have a question or suggestion about a template or script?<br />
      Tell me what youâ€™re building or what youâ€™d like to see next â€” Iâ€™d love to hear from you.
      <br /><br />
      ðŸ“§ <strong>lifeloggerz.official@gmail.com</strong>
    </p>
  </div>

  <style is:global>
    .about h2 {
      text-align: center;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
    }

    .centered-list {
      list-style-position: inside;
      text-align: center;
      padding: 0;
      margin: 1.5rem 0;
    }

    .centered-list li {
      margin: 0.5rem 0;
    }

    .centered-email {
      text-align: center;
      line-height: 1.6;
    }
  </style>

  <script>
    (function () {
      const el = document.getElementById('years-since');
      if (!el) return;
      const startStr = el.dataset.start || '2023-01-01';
      const start = new Date(startStr + 'T00:00:00');
      const now = new Date();
      let y = now.getFullYear() - start.getFullYear();
      const m = now.getMonth() - start.getMonth();
      const d = now.getDate() - start.getDate();
      if (m < 0 || (m === 0 && d < 0)) y--;
      if (y < 0) y = 0;
      el.textContent = `${y} year${y === 1 ? '' : 's'}`;
    })();
  </script>
</AboutLayout>
