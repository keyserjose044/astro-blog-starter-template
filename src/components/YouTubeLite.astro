---
id: string;
title?: string;
start?: number; // seconds
aspect?: string; // e.g. "16/9" or "4/3"
}
const { id, title = "YouTube video", start = 0, aspect = "16/9" } = Astro.props;
const thumbnail = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;
---
<figure class="yt-lite" data-id={id} style={`aspect-ratio:${aspect}`}>
<picture>
<img src={thumbnail} alt={title} loading="lazy" decoding="async" />
</picture>
<button class="yt-play" aria-label={`Play ${title}`}></button>
</figure>


<script>
const fig = document.currentScript?.previousElementSibling;
if (fig) {
fig.addEventListener('click', () => {
const id = fig.getAttribute('data-id');
const params = new URLSearchParams({ autoplay: '1', start: fig.getAttribute('data-start') || '0' });
const iframe = document.createElement('iframe');
iframe.setAttribute('allowfullscreen', '');
iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
iframe.src = `https://www.youtube.com/embed/${id}?${params.toString()}`;
iframe.title = fig.querySelector('img')?.alt || 'YouTube video';
fig.innerHTML = '';
fig.appendChild(iframe);
});
}
</script>


<style>
.yt-lite {
position: relative;
width: 100%;
max-width: 900px;
margin: 1rem auto;
border-radius: 1rem;
overflow: hidden;
box-shadow: 0 8px 24px rgba(0,0,0,.08);
background: #000;
cursor: pointer;
}
.yt-lite img { width: 100%; height: 100%; object-fit: cover; display: block; }
.yt-play {
position: absolute;
inset: 0;
display: grid;
place-items: center;
background: linear-gradient(0deg, rgba(0,0,0,.35), rgba(0,0,0,.35));
border: 0;
}
.yt-play::before {
content: '';
width: 68px; height: 48px;
background: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 68 48\"><path d=\"M66.52 7.74a8 8 0 0 0-5.64-5.66C56.7 1 34 1 34 1s-22.7 0-26.88 1.08A8 8 0 0 0 1.48 7.74 83.6 83.6 0 0 0 .4 24a83.6 83.6 0 0 0 1.08 16.26 8 8 0 0 0 5.64 5.66C11.3 47 34 47 34 47s22.7 0 26.88-1.08a8 8 0 0 0 5.64-5.66A83.6 83.6 0 0 0 67.6 24a83.6 83.6 0 0 0-1.08-16.26Z\" fill=\"%23f00\"/><path d=\"M45 24 27 14v20l18-10Z\" fill=\"%23fff\"/></svg>') center/contain no-repeat;
filter: drop-shadow(0 2px 8px rgba(0,0,0,.25));
}
.yt-lite iframe {
position: absolute; inset: 0; width: 100%; height: 100%; border: 0;
}
</style>
